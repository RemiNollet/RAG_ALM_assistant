rag-alm-assistant/
├─ README.md
├─ LICENSE
├─ .gitignore
├─ pyproject.toml              # ou requirements.txt + setup.cfg si tu veux rester simple
├─ docker/
│  ├─ api.Dockerfile           # container du service d'API/chat
│  ├─ worker.Dockerfile        # container du pipeline d'indexation / batch
│  └─ compose.example.yml      # exemple de docker-compose on-prem (API + vectordb locale)
│
├─ config/
│  ├─ settings.example.yaml    # chemins des données, choix du modèle, paramètres RAG
│  ├─ logging.yaml             # config logging structurée (JSON logs pour prod)
│  └─ secrets.example.env      # variables sensitives à copier en local (.env pas commité)
│
├─ data/
│  ├─ DIC
│  └─ eval/                    # dataset d'évaluation
│     ├─ corpus.json
│     ├─ queries.json
│     ├─ relevant_docs.json
│     ├─ answers.json
│     └─ errors.json
│
├─ src/
│  ├─ rag_alm_assistant/
│  │  ├─ __init__.py
│  │
│  │  ├─ ingestion.py          #loader, chunker, embedder, Chromadb
│  │
│  │  ├─ retrieval/
│  │  │  ├─ retriever.py       # top-k retrieval dans la base vectorielle
│  │  │  ├─ reranker.py        # rerank facultatif (BM25 / cross-encoder local)
│  │
│  │  ├─ llm.py
│  │
│  │  ├─ orchestrator.py    # pipeline complet: question -> retrieve -> generate

│  │  ├─ api.py           
│  │
│  │  ├─ utils/
│  │  │  ├─ config.py          # lecture config/settings.yaml + variables d'env
│  │  │  ├─ logger.py          # logger structuré, utilisé partout
│  │
│  │  └─ constants.py          # constantes globales (taille chunks par défaut etc.)
│  │
│  └─ scripts/
│     ├─ index_corpus.py       # CLI: lance l’ingestion sur un dossier de DIC
│
├─ tests/
│  ├─ unit/
│  │  ├─ test_chunker.py
│  │  ├─ test_retriever.py
│  │  ├─ test_prompt_builder.py
│  │  ├─ test_answer_postproc.py
│  │  └─ test_metrics.py
│  ├─ integration/
│  │  ├─ test_full_rag_pipeline.py   # question -> retrieve -> generate
│  │  └─ test_api_endpoints.py       # /chat retourne bien réponse + sources
│  └─ resources/
│     ├─ sample_dic.pdf             # mini DIC fictif non-sensible pour les tests
│     └─ sample_eval.json           # mini dataset jouet pour CI
│
├─ notebooks/
│  ├─ exploration.ipynb
│  ├─ evaluation.ipynb
│
├─ docs/
│  ├─ architecture.md          # schéma RAG end-to-end, flux de données
│  ├─ eval_protocol.md         # comment on calcule et interprète le F1 BERTScore
│  └─ runbook.md               # comment lancer / redéployer en prod interne
│
└─ ci_cd/
   ├─ pytest.yml               # pipeline d'intégration (tests unitaires/intégration)
   ├─ lint.yml                 # black/ruff/mypy
   └─ build_images.yml         # build Docker images pour l'environnement on-prem